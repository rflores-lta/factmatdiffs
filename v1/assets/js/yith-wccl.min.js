!function(h,n,c){var p,i,a;"undefined"!=typeof yith_wccl_general&&(p=function(t,a,e){var i=!1,o=t.data("product_variations"),t=t.find(".variations select"),r=[];h.each(t,function(){var t=h(this).data("attribute_name")||h(this).attr("name");r[t]=e==t?a:h(this).val()});for(var n=0;n<o.length;n++){var c,s,l=o[n];if(i)break;for(c in(i=l).attributes)!l.attributes.hasOwnProperty(c)||(s=l.attributes[c])!=r[c]&&""!=s&&(i=!1)}return i},i=function(t){t.preventDefault();var a=h(this),e=a.data("product_id"),i=a.data("quantity"),o=[],r={};h.each(a.data(),function(t,a){r[t]=a}),t.data.select.each(function(t){o[t]=this.name+"="+this.value}),h(c.body).trigger("adding_to_cart",[a,r]),h.ajax({url:yith_wccl_general.ajaxurl.toString().replace("%%endpoint%%",yith_wccl_general.actionAddCart),type:"POST",data:{action:yith_wccl_general.actionAddCart,product_id:e,variation_id:t.data.variation,attr:o.join("&"),quantity:i,context:"frontend"},beforeSend:function(){a.addClass("loading").removeClass("added")},success:function(t){t.error&&t.product_url?n.location=t.product_url:yith_wccl_general.cart_redirect?n.location=yith_wccl_general.cart_url:(a.removeClass("loading").addClass("added"),a.next(".added_to_cart").length||a.after(' <a href="'+yith_wccl_general.cart_url+'" class="added_to_cart wc-forward" title="'+yith_wccl_general.view_cart+'">'+yith_wccl_general.view_cart+"</a>"),h(c.body).trigger("wc_fragment_refresh"),h(c).trigger("wc_update_cart"),h(c.body).trigger("added_to_cart",[t.fragments,t.cart_hash,a]))}})},(a=function(t,a){this.$form=t,this.$attr="undefined"!=typeof yith_wccl?JSON.parse(yith_wccl.attributes):a,this.$select=this.$form.find(".variations select"),this.$use_ajax=!1===this.$form.data("product_variations"),this.$is_loop=this.$form.hasClass("in_loop"),this.$wrapper=this.$form.closest(yith_wccl_general.wrapper_container_shop).length?this.$form.closest(yith_wccl_general.wrapper_container_shop):this.$form.closest(".product-add-to-cart"),this.$image=this.$wrapper.find(yith_wccl_general.image_selector),this.$def_image_src=this.$image.data("lazy-src")?this.$image.data("lazy-src"):this.$image.attr("src"),this.$def_image_srcset=this.$image.data("lazy-srcset")?this.$image.data("lazy-srcset"):this.$image.attr("srcset"),this.$price_html=this.$wrapper.find("span.price").clone().wrap("<p>").parent().html(),this.$button=this.$wrapper.find("a.product_type_variable"),this.$button_html=this.$button.html(),this.$input_qty=this.$wrapper.find("input.thumbnail-quantity"),this.$xhr=null,void 0===this.$attr&&(this.$attr=[]),t.on("yith_wccl_form_initialized",{obj:this},this.init),this.$select.each(function(){this.setAttribute("data-default_value",this.value)}),this.resetForm(this),this.$is_loop&&t.parent().on("change",function(t){t.stopPropagation()}),this.$input_qty.length&&this.$input_qty.hide(),this.$form.hasClass("initialized")||this.$form.addClass("initialized").fadeIn().trigger("yith_wccl_form_initialized")}).prototype.styleOption=function(t,a,e,i){"colorpicker"==e?1==(i=i.split(",")).length?a.append(h("<span/>",{class:"yith_wccl_value",css:{background:i}})):(a.append(h('<span class="yith_wccl_value"><span class="yith-wccl-bicolor"/></span>')),a.find(".yith-wccl-bicolor").css({"border-bottom-color":i[0],"border-left-color":i[1]})):"image"==e?a.append(h("<img/>",{class:"yith_wccl_value",src:i})):"label"==e&&a.append(h("<span/>",{class:"yith_wccl_value",text:i}))},a.prototype.addTooltip=function(t,a,e,i,o){var r=h('<span class="yith_wccl_tooltip"></span>'),n=yith_wccl_general.tooltip_pos+" "+yith_wccl_general.tooltip_ani;yith_wccl_general.tooltip&&void 0!==a&&a&&!e.find(".yith_wccl_tooltip").length&&("image"==i&&(a=a.replace("{show_image}",'<img src="'+o+'" />')),r.addClass(n),e.append(r.html("<span>"+a+"</span>")))},a.prototype.handleSelect=function(t){var _=t.data.obj;_.$select.each(function(){var n=h(this),t=_.$attr[this.name],a=decodeURIComponent(this.name),c=n.parent().find(".select_box"),s=[];void 0===t&&(t=_.$attr[a]),!yith_wccl_general.description||_.$is_loop||_.$wrapper.length||_.$form.find(".description_"+a).length||void 0===t||!t.descr||(h(this).closest("tr").length?h(this).closest("tr").after('<tr class="description_'+a+'"><td colspan="2">'+t.descr+"</td></tr>"):h(this).parent().append('<p class="description_'+a+'">'+t.descr+"</p>"));var l=void 0!==t?t.type:n.data("type"),d=void 0!==t&&t.terms;(_.$is_loop||void 0!==t&&t.terms)&&void 0!==l&&l&&(n.addClass("yith_wccl_custom").hide().end().closest(".select-wrapper").addClass("yith_wccl_is_custom"),c.length&&yith_wccl_general.grey_out||(c.remove(),c=h("<div />",{class:"select_box_"+l+" select_box "+n.attr("name")}).insertAfter(n)),n.find("option").each(function(){var i,t,a,e,o,r=h(this).val();(d&&void 0!==d[r]||h(this).data("value"))&&(s.push(r),i=h(this),t="select_option_"+l+" select_option",a=d&&void 0!==d[r]?d[r].value:h(this).data("value"),e=d&&void 0!==d[r]?d[r].tooltip:h(this).data("tooltip"),(o=c.find('[data-value="'+r+'"]')).length||(r!=n.val()&&r!=n.attr("data-default_value")||(t+=" selected"),(o=h("<div/>",{class:t,"data-value":r}).appendTo(c)).off("click").on("click",function(t){var a=h(this).hasClass("inactive"),e=h(this).hasClass("selected");a&&(a=n.data("attribute_name")||n.attr("name"),p(_.$form,h(this).data("value"),a)?n.val("").change():_.resetForm(_)),(e?n.val(""):n.val(i.val())).change(),h(this).toggleClass("selected"),h(this).siblings().removeClass("selected")}),_.styleOption(_,o,l,a),_.addTooltip(_,e,o,l,a)))}),c.children().each(function(){var t=h(this).data("value")+"";"-1"==h.inArray(t,s)?h(this).addClass("inactive"):h(this).removeClass("inactive")}),_.$form.trigger("yith_wccl_select_initialized",[n,t]))})},a.prototype.setDefaultValue=function(t){t=t.data.obj;t.$select.each(function(){h(this).val(h(this).attr("data-default_value"))}),t.$select.first().change()},a.prototype.changeLoopImage=function(t,a){var e;a?(e=void 0!==a.image&&a.image.thumb_src?a.image.thumb_src:"",a=void 0!==a.image&&a.image.srcset?a.image.srcset:"",e&&e.length&&(t.$image.attr("src",e),t.$image.attr("data-lazy-src",e)),a&&a.length&&t.$def_image_srcset&&(t.$image.attr("srcset",a),t.$image.attr("data-lazy-srcset",a))):(t.$image.attr("src",t.$def_image_src),t.$def_image_srcset&&t.$image.attr("srcset",t.$def_image_srcset))},a.prototype.changeSingleImage=function(t,a){var e=t.$form.closest(".product").find(".images").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),i=e.find(".wp-post-image"),t=e.find("a").eq(0);i.wc_set_variation_attr("src",a.image.src),i.wc_set_variation_attr("height",a.image.src_h),i.wc_set_variation_attr("width",a.image.src_w),i.wc_set_variation_attr("srcset",a.image.srcset),i.wc_set_variation_attr("sizes",a.image.sizes),i.wc_set_variation_attr("title",a.image.title),i.wc_set_variation_attr("alt",a.image.alt),i.wc_set_variation_attr("data-src",a.image.full_src),i.wc_set_variation_attr("data-large_image",a.image.full_src),i.wc_set_variation_attr("data-large_image_width",a.image.full_src_w),i.wc_set_variation_attr("data-large_image_height",a.image.full_src_h),e.wc_set_variation_attr("data-thumb",a.image.src),t.wc_set_variation_attr("href",a.image.full_src)},a.prototype.changeImageOnHover=function(t){var e=t.data.obj;1==e.$select.length&&yith_wccl_general.image_hover&&e.$form.on("mouseenter",".select_option",function(){var t=h(this).attr("data-value"),a=e.$select.attr("name"),a=p(e.$form,t,a);h(this).hasClass("selected")||h(this).siblings().hasClass("selected")||a&&(a.image&&a.image.src||a.image_src)&&(e.$form.hasClass("in_loop")?e.changeLoopImage(e,a):e.changeSingleImage(e,a))}).on("mouseleave",".select_option",function(){h(this).hasClass("selected")||h(this).siblings().hasClass("selected")||(e.$form.hasClass("in_loop")?e.changeLoopImage(e,!1):e.$form.wc_variations_image_update(!1))})},a.prototype.handleCheckVariations=function(t,a,e){var i=t.data.obj;e||i.$found&&(t.data.obj.$found=!1,!i.$use_ajax)||i.$changed&&(t.data.obj.$changed=!1,i.resetLoopForm(i))},a.prototype.handleFoundVariation=function(t,a){var e=t.data.obj;e.$use_ajax?e.handleSelect(t):e.$select.last().trigger("focusin"),e.$is_loop&&(e.$changed&&e.resetLoopForm(e),t.data.obj.$changed=!0,t.data.obj.$found=!0,e.changeLoopImage(e,a),a.is_purchasable&&(a.price_html&&e.$wrapper.find("span.price").replaceWith(a.price_html),e.$input_qty.length&&e.$input_qty.show(),a.is_in_stock&&(e.$button.html(yith_wccl_general.add_cart),e.$button.off("click").on("click",{variation:a.variation_id,select:e.$select},i))),e.$wrapper.find("span.price").after(h(a.availability_html).addClass("ywccl_stock")),e.$form.data("active_variation",a.variation_id),h(c).trigger("ywccl_found_variation_in_loop",[a,e.$button,yith_wccl_general.add_cart]))},a.prototype.handleVariationGallery=function(t,a){var e=t.data.obj,t=h(yith_wccl_general.single_gallery_selector);!e.$is_loop&&t.length&&(null!==e.$xhr&&e.$xhr.abort(),void 0!==a?a.variation_id:e.$form.find('input[name="product_id"]').val())},a.prototype.resetLoopForm=function(t){t.changeLoopImage(t,!1),t.$wrapper.find("span.price").replaceWith(t.$price_html),t.$wrapper.find(".ywccl_stock").remove(),t.$input_qty.length&&t.$input_qty.hide(),t.$button.html(t.$button_html).off("click",i).removeClass("added").next(".added_to_cart").remove(),t.$form.data("active_variation",""),h(c).trigger("yith_wccl_reset_loop_form",[t.$button])},a.prototype.resetForm=function(t){t.$form.find("div.select_option").removeClass("selected inactive"),t.$select.val("").change(),t.$form.trigger("reset_data")},a.prototype.onReset=function(t){t.data.obj.$form.find(".select_option.selected").removeClass("selected inactive")},a.prototype.init=function(t){var a=t.data.obj;a.$form.on("click.wc-variation-form",".reset_variations",{obj:a},a.onReset),a.$form.on("woocommerce_update_variation_values",{obj:a},a.handleSelect),a.$form.one("yith_wccl_select_initialized",{obj:a},a.changeImageOnHover),a.$form.on("check_variations",{obj:a},a.handleCheckVariations),a.$form.on("found_variation",{obj:a},a.handleFoundVariation),yith_wccl_general.enable_handle_variation_gallery&&(a.$form.on("found_variation",{obj:a},a.handleVariationGallery),a.$form.on("reset_image",{obj:a},a.handleVariationGallery)),a.handleSelect(t),a.$select.each(function(){var t=h(this).attr("data-default_value");h(this).removeAttr("data-default_value"),h(this).val(t)})},h.yith_wccl=function(t){forms=h(".variations_form.cart:not(.initialized), .owl-item.cloned .variations_form, form.cart.ywcp_form_loaded"),void 0===t&&(t=[]),forms.each(function(){new a(h(this),t)})},h(c).on(yith_wccl_general.plugin_compatibility_selectors,function(){void 0!==h.yith_wccl&&void 0!==h.fn.wc_variation_form&&(h(c).find(".variations_form:not(.initialized), .owl-item.cloned .variations_form").each(function(){h(this).wc_variation_form()}),"undefined"==typeof attr&&(attr=[]),h.yith_wccl(attr))}),h("body").on("quick-view-displayed",function(){var t=h(".pp_woocommerce_quick_view").find(".yith-wccl-data").data("attr");t&&h.yith_wccl(t)}),h(".shop-container > .products").on("append.infiniteScroll",function(){h(c).find(".variations_form:not(.initialized), .owl-item.cloned .variations_form").each(function(){h(this).wc_variation_form()}),"undefined"==typeof attr&&(attr=[]),h.yith_wccl(attr)}),h(c).on("yith_wccl_product_gallery_loaded",function(){var t;"undefined"==typeof mkdf||"function"!=typeof mkdf.modules.common.mkdfPrettyPhoto||(t=h(".mkdf-woo-single-page.mkdf-woo-single-has-pretty-photo .images .woocommerce-product-gallery__image")).length&&(t.children("a").attr("data-rel","prettyPhoto[woo_single_pretty_photo]"),mkdf.modules.common.mkdfPrettyPhoto()),"undefined"!=typeof Flatsome&&(Flatsome.attach(h(".product-gallery")),h(".zoom-button").click(function(t){t.preventDefault(),h(".product-gallery-slider").find(".is-selected a").click()}))}),h(c).ready(function(){h.yith_wccl()}))}(jQuery,window,document);